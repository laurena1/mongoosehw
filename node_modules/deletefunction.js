//bring in the module
var mongoose = require('mongoose');

var connString = "mongodb://" + process.env.IP + ":27017/";
var dbName = "studentsdb";

//connect
var db = mongoose.connect(connString + dbName);

//get the schema - notice how we use the export
var studentSchema = require('./mongoose_word_schema.js').studentSchema;
var Students = mongoose.model('Students', studentSchema);
mongoose.connection.once('open', function() {
    Students.find({}, function(err, docs) {
        
        
        console.log("Before delete: ");
        for (var i in docs) {
            console.log(docs[i].students);
        }
        var query = Students.remove();
        query.exec(function(err, results) {
            console.log("\n%d Documents Deleted.", results);
            Students.find({}, function(err, docs) {
                console.log("\nAfter delete: ");
                for (var i in docs) {
                    console.log(docs[i].students);
                }
                mongoose.disconnect();
            });
        });
    });
});
