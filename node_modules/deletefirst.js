//bring in the module
var mongoose = require('mongoose');

var connString = "mongodb://" + process.env.IP + ":27017/";
var dbName = "students";

//connect
var db = mongoose.connect(connString + dbName);

//get the schema - notice how we use the export
var studentSchema = require('./mongoose_word_schema.js').studentSchema;
var Students = mongoose.model('Students', studentSchema);

//on connection
mongoose.connection.once('open', function() {

    //find the document to remove
    var query = Students.findOne().where('last', 'Alvarez');


    query.exec(function(err, doc) {


        console.log("Before Delete: ");
        console.log(doc);


        doc.remove(function(err, deletedDoc) {

            //prove that it is gone
            Students.findOne({
                last: 'Alvarez'
            }, function(err, doc) {
                console.log("\nAfter Delete: ");
                console.log(doc);

                //leave
                mongoose.disconnect();
            });
        });
    });
});